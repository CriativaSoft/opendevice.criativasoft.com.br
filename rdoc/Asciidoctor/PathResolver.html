<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Asciidoctor::PathResolver - API Documentation for Asciidoctor 0.1.4</title>

<link type="text/css" media="screen" href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../index.html">Home</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/asciidoctor/path_resolver.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    <nav id="sections-section" class="section">
  <h3 class="section-header">Sections</h3>
  <ul class="link-list">
    
      <li><a href="#5Buntitled-5D"></a></li>
    
      <li><a href="#Public">Public</a></li>
    
  </ul>
</nav>

    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../Object.html">Object</a>
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-expand_path">#expand_path</a>
    
    <li ><a href="#method-i-is_root-3F">#is_root?</a>
    
    <li ><a href="#method-i-is_web_root-3F">#is_web_root?</a>
    
    <li ><a href="#method-i-join_path">#join_path</a>
    
    <li ><a href="#method-i-partition_path">#partition_path</a>
    
    <li ><a href="#method-i-posixfy">#posixfy</a>
    
    <li ><a href="#method-i-relative_path">#relative_path</a>
    
    <li ><a href="#method-i-system_path">#system_path</a>
    
    <li ><a href="#method-i-web_path">#web_path</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../README_adoc.html">README.adoc</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../Asciidoctor.html">Asciidoctor</a>
  
    <li><a href="../Asciidoctor/AbstractBlock.html">Asciidoctor::AbstractBlock</a>
  
    <li><a href="../Asciidoctor/AbstractNode.html">Asciidoctor::AbstractNode</a>
  
    <li><a href="../Asciidoctor/AttributeList.html">Asciidoctor::AttributeList</a>
  
    <li><a href="../Asciidoctor/BaseTemplate.html">Asciidoctor::BaseTemplate</a>
  
    <li><a href="../Asciidoctor/Block.html">Asciidoctor::Block</a>
  
    <li><a href="../Asciidoctor/Callouts.html">Asciidoctor::Callouts</a>
  
    <li><a href="../Asciidoctor/Cli.html">Asciidoctor::Cli</a>
  
    <li><a href="../Asciidoctor/Cli/Invoker.html">Asciidoctor::Cli::Invoker</a>
  
    <li><a href="../Asciidoctor/Cli/Options.html">Asciidoctor::Cli::Options</a>
  
    <li><a href="../Asciidoctor/Compliance.html">Asciidoctor::Compliance</a>
  
    <li><a href="../Asciidoctor/Debug.html">Asciidoctor::Debug</a>
  
    <li><a href="../Asciidoctor/DocBook45.html">Asciidoctor::DocBook45</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockAdmonitionTemplate.html">Asciidoctor::DocBook45::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockAudioTemplate.html">Asciidoctor::DocBook45::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockColistTemplate.html">Asciidoctor::DocBook45::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockDlistTemplate.html">Asciidoctor::DocBook45::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockExampleTemplate.html">Asciidoctor::DocBook45::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockFloatingTitleTemplate.html">Asciidoctor::DocBook45::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockImageTemplate.html">Asciidoctor::DocBook45::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockListingTemplate.html">Asciidoctor::DocBook45::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockLiteralTemplate.html">Asciidoctor::DocBook45::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockOlistTemplate.html">Asciidoctor::DocBook45::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockOpenTemplate.html">Asciidoctor::DocBook45::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPageBreakTemplate.html">Asciidoctor::DocBook45::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockParagraphTemplate.html">Asciidoctor::DocBook45::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPassTemplate.html">Asciidoctor::DocBook45::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockPreambleTemplate.html">Asciidoctor::DocBook45::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockQuoteTemplate.html">Asciidoctor::DocBook45::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockRulerTemplate.html">Asciidoctor::DocBook45::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockSidebarTemplate.html">Asciidoctor::DocBook45::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockTableTemplate.html">Asciidoctor::DocBook45::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockTocTemplate.html">Asciidoctor::DocBook45::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockUlistTemplate.html">Asciidoctor::DocBook45::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockVerseTemplate.html">Asciidoctor::DocBook45::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/BlockVideoTemplate.html">Asciidoctor::DocBook45::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/DocumentTemplate.html">Asciidoctor::DocBook45::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/EmbeddedTemplate.html">Asciidoctor::DocBook45::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineAnchorTemplate.html">Asciidoctor::DocBook45::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineBreakTemplate.html">Asciidoctor::DocBook45::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineButtonTemplate.html">Asciidoctor::DocBook45::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineCalloutTemplate.html">Asciidoctor::DocBook45::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineFootnoteTemplate.html">Asciidoctor::DocBook45::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineImageTemplate.html">Asciidoctor::DocBook45::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineIndextermTemplate.html">Asciidoctor::DocBook45::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineKbdTemplate.html">Asciidoctor::DocBook45::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineMenuTemplate.html">Asciidoctor::DocBook45::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/InlineQuotedTemplate.html">Asciidoctor::DocBook45::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook45/SectionTemplate.html">Asciidoctor::DocBook45::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5.html">Asciidoctor::DocBook5</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockAdmonitionTemplate.html">Asciidoctor::DocBook5::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockAudioTemplate.html">Asciidoctor::DocBook5::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockColistTemplate.html">Asciidoctor::DocBook5::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockDlistTemplate.html">Asciidoctor::DocBook5::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockExampleTemplate.html">Asciidoctor::DocBook5::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockFloatingTitleTemplate.html">Asciidoctor::DocBook5::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockImageTemplate.html">Asciidoctor::DocBook5::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockListingTemplate.html">Asciidoctor::DocBook5::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockLiteralTemplate.html">Asciidoctor::DocBook5::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockOlistTemplate.html">Asciidoctor::DocBook5::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockOpenTemplate.html">Asciidoctor::DocBook5::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPageBreakTemplate.html">Asciidoctor::DocBook5::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockParagraphTemplate.html">Asciidoctor::DocBook5::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPassTemplate.html">Asciidoctor::DocBook5::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockPreambleTemplate.html">Asciidoctor::DocBook5::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockQuoteTemplate.html">Asciidoctor::DocBook5::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockRulerTemplate.html">Asciidoctor::DocBook5::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockSidebarTemplate.html">Asciidoctor::DocBook5::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockTableTemplate.html">Asciidoctor::DocBook5::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockTocTemplate.html">Asciidoctor::DocBook5::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockUlistTemplate.html">Asciidoctor::DocBook5::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockVerseTemplate.html">Asciidoctor::DocBook5::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/BlockVideoTemplate.html">Asciidoctor::DocBook5::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/DocumentTemplate.html">Asciidoctor::DocBook5::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/EmbeddedTemplate.html">Asciidoctor::DocBook5::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineAnchorTemplate.html">Asciidoctor::DocBook5::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineBreakTemplate.html">Asciidoctor::DocBook5::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineButtonTemplate.html">Asciidoctor::DocBook5::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineCalloutTemplate.html">Asciidoctor::DocBook5::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineFootnoteTemplate.html">Asciidoctor::DocBook5::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineImageTemplate.html">Asciidoctor::DocBook5::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineIndextermTemplate.html">Asciidoctor::DocBook5::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineKbdTemplate.html">Asciidoctor::DocBook5::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineMenuTemplate.html">Asciidoctor::DocBook5::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/InlineQuotedTemplate.html">Asciidoctor::DocBook5::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/DocBook5/SectionTemplate.html">Asciidoctor::DocBook5::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/Document.html">Asciidoctor::Document</a>
  
    <li><a href="../Asciidoctor/EmptyTemplate.html">Asciidoctor::EmptyTemplate</a>
  
    <li><a href="../Asciidoctor/Extensions.html">Asciidoctor::Extensions</a>
  
    <li><a href="../Asciidoctor/Extensions/BlockMacroProcessor.html">Asciidoctor::Extensions::BlockMacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/BlockProcessor.html">Asciidoctor::Extensions::BlockProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Extension.html">Asciidoctor::Extensions::Extension</a>
  
    <li><a href="../Asciidoctor/Extensions/IncludeProcessor.html">Asciidoctor::Extensions::IncludeProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/InlineMacroProcessor.html">Asciidoctor::Extensions::InlineMacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/MacroProcessor.html">Asciidoctor::Extensions::MacroProcessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Postprocessor.html">Asciidoctor::Extensions::Postprocessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Preprocessor.html">Asciidoctor::Extensions::Preprocessor</a>
  
    <li><a href="../Asciidoctor/Extensions/Processor.html">Asciidoctor::Extensions::Processor</a>
  
    <li><a href="../Asciidoctor/Extensions/Registry.html">Asciidoctor::Extensions::Registry</a>
  
    <li><a href="../Asciidoctor/Extensions/Treeprocessor.html">Asciidoctor::Extensions::Treeprocessor</a>
  
    <li><a href="../Asciidoctor/HTML5.html">Asciidoctor::HTML5</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockAdmonitionTemplate.html">Asciidoctor::HTML5::BlockAdmonitionTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockAudioTemplate.html">Asciidoctor::HTML5::BlockAudioTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockColistTemplate.html">Asciidoctor::HTML5::BlockColistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockDlistTemplate.html">Asciidoctor::HTML5::BlockDlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockExampleTemplate.html">Asciidoctor::HTML5::BlockExampleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockFloatingTitleTemplate.html">Asciidoctor::HTML5::BlockFloatingTitleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockImageTemplate.html">Asciidoctor::HTML5::BlockImageTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockListingTemplate.html">Asciidoctor::HTML5::BlockListingTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockLiteralTemplate.html">Asciidoctor::HTML5::BlockLiteralTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockOlistTemplate.html">Asciidoctor::HTML5::BlockOlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockOpenTemplate.html">Asciidoctor::HTML5::BlockOpenTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPageBreakTemplate.html">Asciidoctor::HTML5::BlockPageBreakTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockParagraphTemplate.html">Asciidoctor::HTML5::BlockParagraphTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPassTemplate.html">Asciidoctor::HTML5::BlockPassTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockPreambleTemplate.html">Asciidoctor::HTML5::BlockPreambleTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockQuoteTemplate.html">Asciidoctor::HTML5::BlockQuoteTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockRulerTemplate.html">Asciidoctor::HTML5::BlockRulerTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockSidebarTemplate.html">Asciidoctor::HTML5::BlockSidebarTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockTableTemplate.html">Asciidoctor::HTML5::BlockTableTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockTocTemplate.html">Asciidoctor::HTML5::BlockTocTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockUlistTemplate.html">Asciidoctor::HTML5::BlockUlistTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockVerseTemplate.html">Asciidoctor::HTML5::BlockVerseTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/BlockVideoTemplate.html">Asciidoctor::HTML5::BlockVideoTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/DocumentTemplate.html">Asciidoctor::HTML5::DocumentTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/EmbeddedTemplate.html">Asciidoctor::HTML5::EmbeddedTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineAnchorTemplate.html">Asciidoctor::HTML5::InlineAnchorTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineBreakTemplate.html">Asciidoctor::HTML5::InlineBreakTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineButtonTemplate.html">Asciidoctor::HTML5::InlineButtonTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineCalloutTemplate.html">Asciidoctor::HTML5::InlineCalloutTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineFootnoteTemplate.html">Asciidoctor::HTML5::InlineFootnoteTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineImageTemplate.html">Asciidoctor::HTML5::InlineImageTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineIndextermTemplate.html">Asciidoctor::HTML5::InlineIndextermTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineKbdTemplate.html">Asciidoctor::HTML5::InlineKbdTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineMenuTemplate.html">Asciidoctor::HTML5::InlineMenuTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/InlineQuotedTemplate.html">Asciidoctor::HTML5::InlineQuotedTemplate</a>
  
    <li><a href="../Asciidoctor/HTML5/SectionTemplate.html">Asciidoctor::HTML5::SectionTemplate</a>
  
    <li><a href="../Asciidoctor/Helpers.html">Asciidoctor::Helpers</a>
  
    <li><a href="../Asciidoctor/Inline.html">Asciidoctor::Inline</a>
  
    <li><a href="../Asciidoctor/Lexer.html">Asciidoctor::Lexer</a>
  
    <li><a href="../Asciidoctor/List.html">Asciidoctor::List</a>
  
    <li><a href="../Asciidoctor/ListItem.html">Asciidoctor::ListItem</a>
  
    <li><a href="../Asciidoctor/PathResolver.html">Asciidoctor::PathResolver</a>
  
    <li><a href="../Asciidoctor/PreprocessorReader.html">Asciidoctor::PreprocessorReader</a>
  
    <li><a href="../Asciidoctor/Reader.html">Asciidoctor::Reader</a>
  
    <li><a href="../Asciidoctor/Reader/Cursor.html">Asciidoctor::Reader::Cursor</a>
  
    <li><a href="../Asciidoctor/Renderer.html">Asciidoctor::Renderer</a>
  
    <li><a href="../Asciidoctor/SafeMode.html">Asciidoctor::SafeMode</a>
  
    <li><a href="../Asciidoctor/Section.html">Asciidoctor::Section</a>
  
    <li><a href="../Asciidoctor/Substituters.html">Asciidoctor::Substituters</a>
  
    <li><a href="../Asciidoctor/Table.html">Asciidoctor::Table</a>
  
    <li><a href="../Asciidoctor/Table/Cell.html">Asciidoctor::Table::Cell</a>
  
    <li><a href="../Asciidoctor/Table/Column.html">Asciidoctor::Table::Column</a>
  
    <li><a href="../Asciidoctor/Table/ParserContext.html">Asciidoctor::Table::ParserContext</a>
  
    <li><a href="../Asciidoctor/TemplateCache.html">Asciidoctor::TemplateCache</a>
  
    <li><a href="../Object.html">Object</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Asciidoctor::PathResolver</h1>

  <div id="description" class="description">
    
<p>Handles all operations for resolving, cleaning and joining paths.This class
includes operations for handling both web paths (request URIs) andsystem
paths.</p>

<p>The main emphasis of the class is on creating clean and secure paths.
Cleanpaths are void of duplicate parent and current directory references in
thepath name. Secure paths are paths which are restricted from
accessingdirectories outside of a jail root, if specified.</p>

<p>Since joining two paths can result in an insecure path, this class
alsohandles the task of joining a parent (start) and child (target) path.</p>

<p>This class makes no use of path utilities from the Ruby libraries.
Instead,it handles all aspects of path manipulation. The main benefit
ofinternalizing these operations is that the class is able to handle both
posixand windows paths independent of the operating system on which it
runs. Thismakes the class both deterministic and easier to test.</p>

<h3 id="label-Examples">Examples<span><a href="#label-Examples">&para;</a> <a href="#documentation">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">resolver</span> = <span class="ruby-constant">PathResolver</span>.<span class="ruby-identifier">new</span>

<span class="ruby-comment"># Web Paths</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'./images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'./images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'/images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'./images/../assets/images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'./assets/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'/../images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'images'</span>, <span class="ruby-string">'assets'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'assets/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">web_path</span>(<span class="ruby-string">'tiger.png'</span>, <span class="ruby-string">'../assets/images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'../assets/images/tiger.png'</span>

<span class="ruby-comment"># System Paths</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">working_dir</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'../images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'/etc/images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/etc/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'images'</span>, <span class="ruby-string">'/etc'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/etc/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">''</span>, <span class="ruby-string">'/etc/images'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/etc/images'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">'/path/to/docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'..'</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">'/path/to/docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'../../../css'</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">'/path/to/docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs/css'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'../../../css'</span>, <span class="ruby-string">'../../..'</span>, <span class="ruby-string">'/path/to/docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs/css'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'..'</span>, <span class="ruby-string">'C:\data\docs\assets'</span>, <span class="ruby-string">'C:\data\docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'C:/data/docs'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'..\..\css'</span>, <span class="ruby-string">'C:\data\docs\assets'</span>, <span class="ruby-string">'C:\data\docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'C:/data/docs/css'</span>

<span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'../../../css'</span>, <span class="ruby-string">'../../..'</span>, <span class="ruby-string">'/path/to/docs'</span>, :<span class="ruby-identifier">recover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SecurityError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'path ../../../../../../css refers to location outside jail: /path/to/docs (disallowed in safe mode)'</span>

<span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'/path/to/docs/images'</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-string">'/path/to/docs'</span>)
=<span class="ruby-operator">&gt;</span> <span class="ruby-string">'/path/to/docs/images'</span>

<span class="ruby-keyword">begin</span>
  <span class="ruby-identifier">resolver</span>.<span class="ruby-identifier">system_path</span>(<span class="ruby-string">'images'</span>, <span class="ruby-string">'/etc'</span>, <span class="ruby-string">'/path/to/docs'</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">SecurityError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> 
<span class="ruby-keyword">end</span>
=<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Start</span> <span class="ruby-identifier">path</span> <span class="ruby-regexp">/etc is outside of jail: /</span><span class="ruby-identifier">path</span><span class="ruby-operator">/</span><span class="ruby-identifier">to</span><span class="ruby-operator">/</span><span class="ruby-identifier">docs</span><span class="ruby-string">'
</span></pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <!-- Constants -->
    <section id="constants-list" class="section">
      <h3 class="section-header">Constants</h3>
      <dl>
      
        <dt id="BACKSLASH">BACKSLASH
        
        <dd class="description">
        
      
        <dt id="DOT">DOT
        
        <dd class="description">
        
      
        <dt id="DOT_DOT">DOT_DOT
        
        <dd class="description">
        
      
        <dt id="SLASH">SLASH
        
        <dd class="description">
        
      
        <dt id="WIN_ROOT_RE">WIN_ROOT_RE
        
        <dd class="description">
        
      
      </dl>
    </section>
    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-file_separator" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">file_separator</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-working_dir" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">working_dir</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
  </section><!-- 5Buntitled-5D -->

  
  
  <section id="Public" class="documentation-section">
    
    <div class="documentation-section-title">
      <h2 class="section-header">
        Public
      </h2>
      <span class="section-click-top">
        <a href="#top">&uarr; top</a>
      </span>
    </div>
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-Public-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(file_separator = nil, working_dir = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Construct a new instance of <a href="PathResolver.html">PathResolver</a>,
optionally specifying thefile separator (to override the system default)
and the working directory(to override the present working directory). The
working directory will beexpanded to an absolute path inside the
constructor.</p>
<dl class="rdoc-list note-list"><dt><a href="PathResolver.html#attribute-i-file_separator">#file_separator</a>
<dd>
<p>the String file separator to use for path operations(optional, default:
File::FILE_SEPARATOR)</p>
</dd><dt><a href="PathResolver.html#attribute-i-working_dir">#working_dir</a>
<dd>
<p>the String working directory (optional, default: Dir.pwd)</p>
</dd></dl>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">file_separator</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">working_dir</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@file_separator</span> = <span class="ruby-identifier">file_separator</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> (<span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">ALT_SEPARATOR</span> <span class="ruby-operator">||</span> <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">SEPARATOR</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">file_separator</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">working_dir</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-ivar">@working_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@working_dir</span> = <span class="ruby-identifier">is_root?</span>(<span class="ruby-identifier">working_dir</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">working_dir</span> <span class="ruby-operator">:</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">working_dir</span>) 
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-Public-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-expand_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">expand_path</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Expand the path by resolving any parent references (..)and cleaning self
references (.).</p>

<p>The result will be relative if the path is relative andabsolute if the path
is absolute. The file separator usedin the expanded path is the one
specified when the classwas constructed.</p>
<dl class="rdoc-list note-list"><dt>path
<dd>
<p>the String path to expand</p>
</dd></dl>

<p>returns a String path with any parent or self references resolved.</p>
          
          

          
          <div class="method-source-code" id="expand_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">path_segments</span>, <span class="ruby-identifier">path_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">join_path</span> <span class="ruby-identifier">path_segments</span>, <span class="ruby-identifier">path_root</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- expand_path-source -->
          
        </div>

        

        
      </div><!-- expand_path-method -->

    
      <div id="method-i-is_root-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_root?</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Check if the specified path is an absolute root pathThis operation
correctly handles both posix and windows paths.</p>
<dl class="rdoc-list note-list"><dt>path
<dd>
<p>the String path to check</p>
</dd></dl>

<p>returns a Boolean indicating whether the path is an absolute root path</p>
          
          

          
          <div class="method-source-code" id="is_root-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_root?</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@file_separator</span> <span class="ruby-operator">==</span> <span class="ruby-constant">BACKSLASH</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">WIN_ROOT_RE</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-constant">SLASH</span>
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_root-3F-source -->
          
        </div>

        

        
      </div><!-- is_root-3F-method -->

    
      <div id="method-i-is_web_root-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">is_web_root?</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Determine if the path is an absolute (root) web path</p>
<dl class="rdoc-list note-list"><dt>path
<dd>
<p>the String path to check</p>
</dd></dl>

<p>returns a Boolean indicating whether the path is an absolute (root) web
path</p>
          
          

          
          <div class="method-source-code" id="is_web_root-3F-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 151</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">is_web_root?</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-identifier">path</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-constant">SLASH</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- is_web_root-3F-source -->
          
        </div>

        

        
      </div><!-- is_web_root-3F-method -->

    
      <div id="method-i-join_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join_path</span><span
            class="method-args">(segments, root = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Join the segments using the posix file separator (since Ruby knowshow to
work with paths specified this way, regardless of OS). Use the root,if
specified, to construct an absolute path. Otherwise join the segments asa
relative path.</p>
<dl class="rdoc-list note-list"><dt>segments
<dd>
<p>a String Array of path segments</p>
</dd><dt>root
<dd>
<p>a String path root (optional, default: nil)</p>
</dd></dl>

<p>returns a String path formed by joining the segments using the posix
fileseparator and prepending the root, if specified</p>
          
          

          
          <div class="method-source-code" id="join_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 214</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">join_path</span>(<span class="ruby-identifier">segments</span>, <span class="ruby-identifier">root</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">root</span>
    <span class="ruby-node">&quot;#{root}#{SLASH}#{segments * SLASH}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">segments</span> <span class="ruby-operator">*</span> <span class="ruby-constant">SLASH</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- join_path-source -->
          
        </div>

        

        
      </div><!-- join_path-method -->

    
      <div id="method-i-partition_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">partition_path</span><span
            class="method-args">(path, web_path = false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Partition the path into path segments and remove any empty segmentsor
segments that are self references (.). The path is split on either posixor
windows file separators.</p>
<dl class="rdoc-list note-list"><dt>path
<dd>
<p>the String path to partition</p>
</dd><dt><a href="PathResolver.html#method-i-web_path">#web_path</a>
<dd>
<p>a Boolean indicating whether the path should be handledas a web path
(optional, default: false)</p>
</dd></dl>

<p>returns a 3-item Array containing the Array of String path segments,
thepath root, if the path is absolute, and the posix version of the path.</p>
          
          

          
          <div class="method-source-code" id="partition_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">web_path</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">posix_path</span> = <span class="ruby-identifier">posixfy</span> <span class="ruby-identifier">path</span>
  <span class="ruby-identifier">is_root</span> = <span class="ruby-identifier">web_path</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">is_web_root?</span>(<span class="ruby-identifier">posix_path</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">is_root?</span>(<span class="ruby-identifier">posix_path</span>)
  <span class="ruby-identifier">path_segments</span> = <span class="ruby-identifier">posix_path</span>.<span class="ruby-identifier">tr_s</span>(<span class="ruby-constant">SLASH</span>, <span class="ruby-constant">SLASH</span>).<span class="ruby-identifier">split</span>(<span class="ruby-constant">SLASH</span>)
  <span class="ruby-comment"># capture relative root</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-identifier">path_segments</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DOT</span> <span class="ruby-operator">?</span> <span class="ruby-constant">DOT</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">path_segments</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">DOT</span>)
  <span class="ruby-comment"># capture absolute root, preserving relative root if set</span>
  <span class="ruby-identifier">root</span> = <span class="ruby-identifier">is_root</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">path_segments</span>.<span class="ruby-identifier">shift</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">root</span>

  [<span class="ruby-identifier">path_segments</span>, <span class="ruby-identifier">root</span>, <span class="ruby-identifier">posix_path</span>]
<span class="ruby-keyword">end</span></pre>
          </div><!-- partition_path-source -->
          
        </div>

        

        
      </div><!-- partition_path-method -->

    
      <div id="method-i-posixfy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">posixfy</span><span
            class="method-args">(path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Normalize path by converting any backslashes to forward slashes</p>
<dl class="rdoc-list note-list"><dt>path
<dd>
<p>the String path to normalize</p>
</dd></dl>

<p>returns a String path with any backslashes replaced with forward slashes</p>
          
          

          
          <div class="method-source-code" id="posixfy-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">posixfy</span>(<span class="ruby-identifier">path</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-string">''</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">path</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">BACKSLASH</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-constant">BACKSLASH</span>, <span class="ruby-constant">SLASH</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">path</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- posixfy-source -->
          
        </div>

        

        
      </div><!-- posixfy-method -->

    
      <div id="method-i-relative_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">relative_path</span><span
            class="method-args">(filename, base_directory)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Calculate the relative path to this absolute filename from the specified
base directory</p>

<p>If either the filename or the base_directory are not absolute paths, no
work is done.</p>
<dl class="rdoc-list note-list"><dt>filename
<dd>
<p>An absolute file name as a String</p>
</dd><dt>base_directory
<dd>
<p>An absolute base directory as a String</p>
</dd></dl>

<p>Return the relative path String of the filename calculated from the base
directory</p>
          
          

          
          <div class="method-source-code" id="relative_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 383</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">relative_path</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">base_directory</span>)
  <span class="ruby-keyword">if</span> (<span class="ruby-identifier">is_root?</span> <span class="ruby-identifier">filename</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">is_root?</span> <span class="ruby-identifier">base_directory</span>)
    <span class="ruby-identifier">offset</span> = <span class="ruby-identifier">base_directory</span>.<span class="ruby-identifier">chomp</span>(<span class="ruby-ivar">@file_separator</span>).<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">filename</span>[<span class="ruby-identifier">offset</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">filename</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- relative_path-source -->
          
        </div>

        

        
      </div><!-- relative_path-method -->

    
      <div id="method-i-system_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">system_path</span><span
            class="method-args">(target, start, jail = nil, opts = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Resolve a system path from the target and start paths. If a jailpath is
specified, enforce that the resolved directory is contained withinthe jail
path. If a jail path is not provided, the resolved path may beany location
on the system. If the resolved path is absolute, use it as is.If the
resolved path is relative, resolve it relative to the working_dirspecified
in the constructor.</p>
<dl class="rdoc-list note-list"><dt>target
<dd>
<p>the String target path</p>
</dd><dt>start
<dd>
<p>the String start (i.e., parent) path</p>
</dd><dt>jail
<dd>
<p>the String jail path to confine the resolved path</p>
</dd><dt>opts
<dd>
<p>an optional Hash of options to control processing (default: {}):* :recover
is used to control whether the processor should auto-recoverwhen an illegal
path is encountered* :target_name is used in messages to refer to the path
being resolved</p>
</dd></dl>

<p>returns a String path that joins the target path with the start path
withany parent references resolved and self references removed and
enforcesthat the resolved path be contained within the jail, if provided</p>
          
          

          
          <div class="method-source-code" id="system_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">system_path</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">start</span>, <span class="ruby-identifier">jail</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">opts</span> = {})
  <span class="ruby-identifier">recover</span> = <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:recover</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">is_root?</span> <span class="ruby-identifier">jail</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SecurityError</span>, <span class="ruby-node">&quot;Jail is not an absolute path: #{jail}&quot;</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">jail</span> = <span class="ruby-identifier">posixfy</span> <span class="ruby-identifier">jail</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">target_segments</span> = []
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">target_segments</span>, <span class="ruby-identifier">target_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">target</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_segments</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@working_dir</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">jail</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">is_root?</span> <span class="ruby-identifier">start</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">expand_path</span> <span class="ruby-identifier">start</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">system_path</span>(<span class="ruby-identifier">start</span>, <span class="ruby-identifier">jail</span>, <span class="ruby-identifier">jail</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">target_root</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">target_root</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">DOT</span>
    <span class="ruby-identifier">resolved_target</span> = <span class="ruby-identifier">join_path</span> <span class="ruby-identifier">target_segments</span>, <span class="ruby-identifier">target_root</span>
    <span class="ruby-comment"># if target is absolute and a sub-directory of jail, or</span>
    <span class="ruby-comment"># a jail is not in place, let it slide</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">resolved_target</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">jail</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">resolved_target</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">start</span> = <span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-ivar">@working_dir</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">jail</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">is_root?</span> <span class="ruby-identifier">start</span>
    <span class="ruby-identifier">start</span> = <span class="ruby-identifier">posixfy</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">start</span> = <span class="ruby-identifier">system_path</span>(<span class="ruby-identifier">start</span>, <span class="ruby-identifier">jail</span>, <span class="ruby-identifier">jail</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># both jail and start have been posixfied at this point</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">jail</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">start</span>
    <span class="ruby-identifier">jail_segments</span>, <span class="ruby-identifier">jail_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">jail</span>)
    <span class="ruby-identifier">start_segments</span> = <span class="ruby-identifier">jail_segments</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">start</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-identifier">jail</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">SecurityError</span>, <span class="ruby-node">&quot;#{opts[:target_name] || 'Start path'} #{start} is outside of jail: #{jail} (disallowed in safe mode)&quot;</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">start_segments</span>, <span class="ruby-identifier">start_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">start</span>)
    <span class="ruby-identifier">jail_segments</span>, <span class="ruby-identifier">jail_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">jail</span>)

    <span class="ruby-comment"># Already checked for this condition</span>
    <span class="ruby-comment">#if start_root != jail_root</span>
    <span class="ruby-comment">#  raise SecurityError, &quot;Jail root #{jail_root} does not match root of #{opts[:target_name] || 'start path'}: #{start_root}&quot;</span>
    <span class="ruby-comment">#end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">start_segments</span>, <span class="ruby-identifier">start_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">start</span>)
    <span class="ruby-identifier">jail_root</span> = <span class="ruby-identifier">start_root</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">resolved_segments</span> = <span class="ruby-identifier">start_segments</span>.<span class="ruby-identifier">dup</span>
  <span class="ruby-identifier">warned</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">target_segments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">segment</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DOT_DOT</span>
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">jail</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">resolved_segments</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">jail_segments</span>.<span class="ruby-identifier">length</span>
          <span class="ruby-identifier">resolved_segments</span>.<span class="ruby-identifier">pop</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">recover</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">SecurityError</span>, <span class="ruby-node">&quot;#{opts[:target_name] || 'path'} #{target} refers to location outside jail: #{jail} (disallowed in safe mode)&quot;</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">warned</span>
          <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;asciidoctor: WARNING: #{opts[:target_name] || 'path'} has illegal reference to ancestor of jail, auto-recovering&quot;</span>
          <span class="ruby-identifier">warned</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">resolved_segments</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">resolved_segments</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">segment</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">join_path</span> <span class="ruby-identifier">resolved_segments</span>, <span class="ruby-identifier">jail_root</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- system_path-source -->
          
        </div>

        

        
      </div><!-- system_path-method -->

    
      <div id="method-i-web_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">web_path</span><span
            class="method-args">(target, start = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Resolve a web path from the target and start paths.The main function of
this operation is to resolve any parentreferences and remove any self
references.</p>
<dl class="rdoc-list note-list"><dt>target
<dd>
<p>the String target path</p>
</dd><dt>start
<dd>
<p>the String start (i.e., parent) path</p>
</dd></dl>

<p>returns a String path that joins the target path with thestart path with
any parent references resolved and selfreferences removed</p>
          
          

          
          <div class="method-source-code" id="web_path-source">
            <pre><span class="ruby-comment"># File lib/asciidoctor/path_resolver.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">web_path</span>(<span class="ruby-identifier">target</span>, <span class="ruby-identifier">start</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">target</span> = <span class="ruby-identifier">posixfy</span>(<span class="ruby-identifier">target</span>)
  <span class="ruby-identifier">start</span> = <span class="ruby-identifier">posixfy</span>(<span class="ruby-identifier">start</span>)
  <span class="ruby-identifier">uri_prefix</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">is_web_root?</span>(<span class="ruby-identifier">target</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">start</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">target</span> = <span class="ruby-node">&quot;#{start}#{SLASH}#{target}&quot;</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">':'</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">target</span>.<span class="ruby-identifier">match</span>(<span class="ruby-constant">Asciidoctor</span><span class="ruby-operator">::</span><span class="ruby-constant">REGEXP</span>[<span class="ruby-value">:uri_sniff</span>])
      <span class="ruby-identifier">uri_prefix</span> = <span class="ruby-identifier">$~</span>[<span class="ruby-value">0</span>]
      <span class="ruby-identifier">target</span> = <span class="ruby-identifier">target</span>[<span class="ruby-identifier">uri_prefix</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">target_segments</span>, <span class="ruby-identifier">target_root</span>, <span class="ruby-identifier">_</span> = <span class="ruby-identifier">partition_path</span>(<span class="ruby-identifier">target</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">resolved_segments</span> = <span class="ruby-identifier">target_segments</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">accum</span>, <span class="ruby-identifier">segment</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">segment</span> <span class="ruby-operator">==</span> <span class="ruby-constant">DOT_DOT</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">accum</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">accum</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">segment</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">target_root</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">target_root</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">DOT</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">accum</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">DOT_DOT</span>
        <span class="ruby-identifier">accum</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">segment</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">accum</span>.<span class="ruby-identifier">pop</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">accum</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">segment</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">accum</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri_prefix</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">join_path</span> <span class="ruby-identifier">resolved_segments</span>, <span class="ruby-identifier">target_root</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-node">&quot;#{uri_prefix}#{join_path resolved_segments, target_root}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- web_path-source -->
          
        </div>

        

        
      </div><!-- web_path-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- Public -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.1.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

